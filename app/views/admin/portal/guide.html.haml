%section#banner
  .row
    .medium-12.columns
      %h2 Using the codebar application

      %h3 Managing admin privileges

      %p To manage roles, we use the Rolify gem. At the moment, the only way to add and remove privileges is through Rails console. There are three types of special roles: chapter organisers, meeting organisers and admins.

      %p Chapter organisers can create and modify sponsors and workshops only for chapters that they are permissioned. To make a member into an organiser of a chapter,

      = dot_markdown("`Member.find(:id).add_role(:organiser, Chapter.find(:id))`")

      %p Meeting organisers can create and modify monthlies. To make a member into a meeting organiser,

      = dot_markdown("`Member.find(:id).add_role(:organiser, Meeting)`")

      %p Admins can create and modify sponsors, workshops, meetings and events across all chapters. Admins can also create new chapters. To permission a member as an admin,

      = dot_markdown("`Member.find(:id).add_role(:admin)`")

      %p Similarly, to remove privileges,

      = dot_markdown("`Member.find(:id).remove_role(:organiser, Chapter.find(:id))`")

      = dot_markdown("`Member.find(:id).remove_role(:organiser, Meeting)`")

      = dot_markdown("`Member.find(:id).remove_role(:admin)`")

      %p You can also check if a member has permissions. The second argument for organiser roles can be a specific chapter or :any.

      = dot_markdown("`Member.find(:id).has_role?(:organiser, :any)`")

      %p You can query all of the organisers from a Chapter as well.

      = dot_markdown("`Member.with_role(:organiser, Chapter.find(:13))`")
