.container.py-4.py-lg-5
  .row.justify-content-md-center
    .col-md-10.col-lg-8
      %h1= t('member.details.edit.title')
      %p= t('member.details.edit.summary')

  = simple_form_for @member, url: member_details_path, method: :put do |f|
    .row.justify-content-md-center
      .col-md-10.col-lg-8
        = f.input :name, required: true
        = f.input :surname, required: true
        = f.input :pronouns
        = f.input :email, required: true
        - if @member.coach?
          = f.input :about_you, as: :text, label: t('member.details.edit.coach.about_you'), input_html: { rows: 3 }, required: true
        - else
          = f.input :about_you, as: :text, label: t('member.details.edit.student.about_you'), input_html: { rows: 3 }, required: true
        = f.input :dietary_restrictions, collection: Member::DIETARY_RESTRICTIONS, as: :check_boxes,
          label_method:  ->(r) { r.humanize.upcase_first }
        = f.input :other_dietary_restrictions, placeholder: 'Other dietary restrictions',
            wrapper_html: { class: class_names('mt-n3', 'd-none': !@member.other_dietary_restrictions?) }, label_html: { class: 'sr-only' }
        - if @member.errors.any?
          #error_explanation
            %h2= "#{pluralize(@member.errors.count, 'error')} prohibited this member from being saved:"
            %ul
              - @member.errors.full_messages.each do |msg|
                %li= msg
        - if @member.errors[:how_you_found_us]&.any?
          %span.text-danger= @member.errors[:how_you_found_us].first
        .col-12.mb-3
          %fieldset
            = f.input :how_you_found_us,
                      as: :radio_buttons,
                      collection: Member.how_you_found_us.keys,
                      label_method: ->(option) { t("member.details.edit.how_you_found_us_options.#{option}") },
                      value_method: :to_s,
                      label: t('member.details.edit.how_you_found_us_label'),
                      item_wrapper_class: 'form-check d-flex align-items-center mb-2',
                      label_item: true,
                      input_html: { class: 'form-check-input me-2', style: 'margin-top: 0;' },
                      label_html: { class: 'form-check-label', style: 'margin-left: 0;' }

            = f.input :how_you_found_us_other_reason,
                label: t('member.details.edit.how_you_found_us_other_reason'),
                input_html: { class: 'form-control w-100' }
        = f.input :newsletter, as: :boolean, checked_value: true, unchecked_value: false
        .text-right.mb-4
          = hidden_field_tag :next_page, step2_member_path(member_type: @type)
          = f.button :button, t('member.details.edit.submit'), class: 'btn btn-primary'
